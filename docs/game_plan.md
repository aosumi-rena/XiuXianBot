# Game Logic Reconstruction Plan

**Plan Generated By AI**

This document outlines the proposed redesign of the text-based **修仙** simulator.
The goal is to provide a more engaging experience while preventing numerical
inflation. Existing code under `0-Releases/LTS/OSBLTSDiscord_pre-3.0.2` serves as
reference for current features.

## 1. Core Gameplay Flow
1. **Account Creation** – user registers and chooses a display name.
2. **Daily Sign-In** – grants base currency (`gold`/`copper`).
3. **Cultivation & Hunting** – main loop for accumulating cultivation points.
4. **Ascension** – when cultivation points exceed the threshold, the user faces a
   lightning tribulation. Success advances the stage; failure halves the points.
5. **Progression** – reaching new stages unlocks regions, items, and features.

## 2. Cultivation System Redesign
- Replace the fixed 2‑hour timer with start/stop commands:
  - `!cultivate start [hours]` – begin a session for up to a chosen duration
    (bounded by a maximum to avoid AFK grinding).
  - `!cultivate stop` – end the session early.
- Cultivation gain decays over time following an inverse exponential curve. A
  sample formula:
  
  ```text
  gain = base * pow(0.5, elapsed_hours / decay_rate)
  ```

  This discourages running the command endlessly while still rewarding longer
  sessions. The decay rate and maximum duration should be tuned through testing.
- Elemental interactions remain: the daily element provides bonuses or
  penalties depending on the player's chosen element.
- Add occasional random events during cultivation (e.g., enlightenment,
  disturbance) to create more variety.

## 3. Artifact (法宝) Development
- Introduce artifacts the player can obtain or craft.
- Artifacts have levels and attributes (attack, defense, special effects).
- Growth requires materials gained from hunting, events, or purchases.
- Optional degradation/durability to encourage upkeep.

## 4. Regions and Maps
- Design text‑based regions unlocked by stage or quests.
- Each region may provide:
  - Unique shop inventory (materials, special manuals, artifacts).
  - Elemental bonuses or penalties while within the region.
  - Specific hunting tables or drop rates.
  - Tasks to accelerate artifact growth.
- A `!travel <region>` command moves the player; moving may have a cooldown.

## 5. Currency Usage
- Expand the shop to sell items such as:
  - Temporary buffs for cultivation or hunting.
  - Crafting materials for artifacts.
  - Special manuals that modify the decay curve or grant new abilities.
- Consider a market or trade system between players once basic features are
  stable.

## 6. Battle System (Future Work)
- Planned as turn‑based encounters against creatures or other players.
- Relies on artifact stats, player stage, and possibly learned techniques.
- To be designed after the cultivation and region systems are complete.

## 7. Technical Notes
- Current partially migrated logic will be replaced with a unified core module.
- Commands should be platform‑agnostic so that adapters (Discord, Telegram, etc.)
  share the same game engine.
- Database schema must store timers, artifact data, and region progress.
- Keep localisation support (简体/English) from existing code when rewriting.

## 8. Short‑Term Milestones
1. **Redefine Database Structure** – plan collections for users, timers,
   artifacts, regions.
2. **Rewrite Cultivation Commands** – implement start/stop and decay logic.
3. **Create Basic Region System** – text descriptions, shop variation,
   elemental buffs.
4. **Initial Artifact Mechanics** – obtaining and leveling artifacts.
5. **Feedback & Balancing** – open for community suggestions on GitHub.

---
This plan will evolve as features are implemented and feedback is received.
